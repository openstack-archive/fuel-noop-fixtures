class { 'Openstack::Workloads_collector' :
  enabled               => true,
  workloads_create_user => true,
  workloads_password    => 'MhdNr1K7',
  workloads_tenant      => 'services',
  workloads_username    => 'workloads_collector',
}

haproxy_backend_status { 'keystone-admin' :
  before => 'Class[Openstack::Workloads_collector]',
  count  => '200',
  name   => 'keystone-2',
  step   => '6',
  url    => 'http://192.168.0.5:10000/;csv',
}

keystone_user { 'workloads_collector' :
  ensure   => 'present',
  enabled  => true,
  password => 'MhdNr1K7',
  tenant   => 'services',
}

keystone_user_role { 'workloads_collector@services' :
  ensure => 'present',
  roles  => 'admin',
}

stage { 'main' :
}

